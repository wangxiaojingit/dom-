<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>左右运动的盒子1</title>
<style type="text/css">
*{margin:0;padding:0;}
#box{width:100px;height:100px;background:green;position:absolute;left:300px;top:0px;}
#box2{width:100px;height:100px;background:lightskyblue;position:absolute;left:300px;top:200px;}
button{margin-top:200px;}
</style>
</head> 

<body>
  <div id="box"></div>
  <div id="box2"></div>

  <button id="left">left</button>
  <button id="right">right</button>
</body>
</html>
<script src="utils.js"></script>
<script>
  
   var obox=document.getElementById("box");
   var obox2=document.getElementById("box2");
   var left=document.getElementById("left");
   var right=document.getElementById("right");
   var lMax=0;
   var rMax=document.documentElement.clientWidth-box.offsetWidth;

   function move(target){
     var _this=this;
      //获取当前的left值
      var eleLeft=utils.offset(_this).left;
         _move()
         function _move(){
           clearTimeout(_this.timer);
           var curleft=utils.offset(_this).left;
           if(target>eleLeft){
             //说明向右走
             if(curleft>=target){
              _this.style.left=target+"px";
                //走到右边界之后向左运动
                move.call(_this,lMax);
                return;
              }
             var moved=curleft+10
           }else if(target<eleLeft){
             //说明向左走
                if(curleft<=target){
                  _this.style.left=target+"px";
                  //走到左边界向右边界
                  move.call(_this,rMax)
                  return;
                }
                var moved=curleft-10
           }else{
             return;
           }
           _this.style.left=moved+"px";
           _this.timer=window.setTimeout(_move,10)
         }
     
          
      
   }
    







   right.onclick=function(){
    move.call(obox,rMax);
    window.setTimeout(function(){
      move.call(obox2,rMax);
    },500)
   }
   
</script>












 

 