<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css">
     *{margin:0;padding:0;}
     #obox{width:100px;height:100px;background:green;position:absolute;left:150px;top:0px;}
    </style>
</head>
<body>
    <div id="obox"></div>
</body>
</html>
<script src="utils.js"></script>
<script>
   var obox=document.getElementById("obox");
   //封装成一个函数
   /**
   * 起始位置:150;
     目标位置:850;
     规定完成时间1000ms
    
      规定每10ms 走一步
   */



obox.onclick=function(){
    animate(this,"top",1000,850,function(){
        obox.style.background="pink"
    })
}
function animate(ele,attr,duration,target,callback){
    var _this=ele;
    var start=parseInt(utils.getCss(ele,attr));//起始位置
    var change=target-start;
    var interval=10;
    var timer=null;
    var time=0;
    function _move(){
       time+=interval;
       if(time<duration){
        _this.style[attr]=time/duration*change+start+"px"
       }else{
        _this.style[attr]=target+"px";
        clearInterval(timer);
        callback();
       }
       
    }
    timer=window.setInterval(_move,interval)

}










    
</script>